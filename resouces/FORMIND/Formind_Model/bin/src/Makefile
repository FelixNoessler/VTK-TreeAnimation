#############################################################################
# Makefile for building formind . Works with gcc. 
# For building with other compilers (Embarcadero, MSVC) please use the 
# project files in ..\OtherCompiler or ..\Embarcadero* 
# 
# make: builds formind
# make clean: removes all .o and formind
# Generated by Michael Müller , 2015
# 
#############################################################################

INCPATH       = -I./ -I./MMParSet  -IC:/formind/formind-projects/Public/release/Formind_Model/bin/src
##LIBS          = $(SUBLIBS) -static-libgcc -static-libstdc++ -Wl,-Bstatic -lstdc++ -pthread -Wl,-Bdynamic 
LIBS          = $(SUBLIBS) -static-libgcc -static-libstdc++ -lrt -Wl,-Bstatic

DEFINES       = 
CC            = gcc
CXX           = g++
CFLAGS        = -g -Wall -W $(DEFINES) 
CXXFLAGS      = -g -std=c++11 -Ofast $(DEFINES)
LDFLAGS       = $(LIBS)
SOURCES       = for_carbon.cpp \
		for_comp.cpp for_dead.cpp \
		for_grow.cpp for_io.cpp \
		for_iommparset.cpp \
		for_misc.cpp for_res.cpp for_seed.cpp \
		for_var.cpp \
		formind.cpp \
		random.cpp \
		main.cpp 

HEADERS       = 	for_carbon.h \
		for_comp.h \
		for_const.h \
		for_dead.h \
		for_global.h \
		for_grow.h \
		for_io.h \
		for_iommparset.h \
		formind.h \
		for_misc.h \
		for_res.h \
		for_seed.h \
		for_var.h \
		random.h \
		MMParSet/MMErrorMessage.h \
		MMParSet/MMInterval.h \
		MMParSet/MMPar.h \
		MMParSet/MMParHelperFunctions.h \
		MMParSet/MMParNode.h \
		MMParSet/MMParOptions.h \
		MMParSet/MMParSet.h \
		MMParSet/MMParSetIO.h \
		MMParSet/MMStreamIO.h \
		MMParSet/MMValidValues.h

OBJECTS=$(SOURCES:.cpp=.o)

EXECUTABLE=formind

all: $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS)
	$(CXX) $(LDFLAGS) $(OBJECTS) -o $@

.cpp.o: $(HEADERS)
	$(CXX) $(CXXFLAGS) $(INCPATH) -c  $< -o $@


clean: 
	rm $(OBJECTS) $(EXECUTABLE)
